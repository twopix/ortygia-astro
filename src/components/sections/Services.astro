---
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import { getLangFromUrl, useTranslations } from "../../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const langPrefix = lang === "en" ? "" : `/${lang}`;
const t = useTranslations(lang);

const services = (await getCollection("services", (srvc) => srvc.slug.startsWith(lang + "/"))).sort((a, b) => a.data.order - b.data.order).slice(0, 3);
---

<section class="services section-padding">
  <div class="container">    
    <div class="row">
      {
        services.map((service) => (
          <div class="col-md-4">
            <div class="item">
              <div class="item-wrap">
                <div class="img">
                  {service.data.image && <Image width={356} height={534} src={service.data.image} alt={service.data.title} layout="constrained" />}
                </div>
                <div class="con">
                  <div class="title-box">
                    <h3>
                      <a href={`${langPrefix}/services/`}>{service.data.title}</a>
                    </h3>
                  </div>
                  <div class="arrow">
                    <a href={`${langPrefix}/services/`}>
                      <span class="ti-arrow-right" />
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>
<!-- Services -->
<section class="services section-padding">
  <div class="container">
    <div class="row">
      <div class="col-md-6 p-0 animate-box" data-animate-effect="fadeInLeft">
        <div class="img left">
          <a href="restaurant.html"><img src="img/restaurant/1.jpg" alt="" /></a>
        </div>
      </div>
      <div class="col-md-6 p-0 bg-cream valign animate-box" data-animate-effect="fadeInRight">
        <div class="content">
          <div class="cont text-left">
            <div class="info">
              <h6>Discover</h6>
            </div>
            <h4>The Restaurant</h4>
            <p>
              Restaurant inilla duiman at elit finibus viverra nec a lacus themo the nesudea seneoice misuscipit non sagie the fermen ziverra tristiue duru the
              ivite dianne onen nivami acsestion augue artine.
            </p>
            <div class="butn-dark"><a href="restaurant.html"><span>Learn More</span></a></div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 bg-cream p-0 order2 valign animate-box" data-animate-effect="fadeInLeft">
        <div class="content">
          <div class="cont text-left">
            <div class="info">
              <h6>Experiences</h6>
            </div>
            <h4>Spa Center</h4>
            <p>
              Spa center inilla duiman at elit finibus viverra nec a lacus themo the nesudea seneoice misuscipit non sagie the fermen ziverra tristiue duru the
              ivite dianne onen nivami acsestion augue artine.
            </p>
            <div class="butn-dark"><a href="spa-wellness.html"><span>Learn More</span></a></div>
          </div>
        </div>
      </div>
      <div class="col-md-6 p-0 order1 animate-box" data-animate-effect="fadeInRight">
        <div class="img">
          <a href="spa-wellness.html"><img src="img/spa/3.jpg" alt="" /></a>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 p-0 animate-box" data-animate-effect="fadeInLeft">
        <div class="img left">
          <a href="spa-wellness.html"><img src="img/spa/2.jpg" alt="" /></a>
        </div>
      </div>
      <div class="col-md-6 p-0 bg-cream valign animate-box" data-animate-effect="fadeInRight">
        <div class="content">
          <div class="cont text-left">
            <div class="info">
              <h6>Modern</h6>
            </div>
            <h4>Fitness Center</h4>
            <p>
              Restaurant inilla duiman at elit finibus viverra nec a lacus themo the nesudea seneoice misuscipit non sagie the fermen ziverra tristiue duru the
              ivite dianne onen nivami acsestion augue artine.
            </p>
            <div class="butn-dark"><a href="spa-wellness.html"><span>Learn More</span></a></div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 bg-cream p-0 order2 valign animate-box" data-animate-effect="fadeInLeft">
        <div class="content">
          <div class="cont text-left">
            <div class="info">
              <h6>Experiences</h6>
            </div>
            <h4>The Health Club & Pool</h4>
            <p>
              The health club & pool at elit finibus viverra nec a lacus themo the nesudea seneoice misuscipit non sagie the fermen ziverra tristiue duru the
              ivite dianne onen nivami acsestion augue artine.
            </p>
            <div class="butn-dark"><a href="spa-wellness.html"><span>Learn More</span></a></div>
          </div>
        </div>
      </div>
      <div class="col-md-6 p-0 order1 animate-box" data-animate-effect="fadeInRight">
        <div class="img">
          <a href="spa-wellness.html"><img src="img/spa/1.jpg" alt="" /></a>
        </div>
      </div>
    </div>
  </div>
</section>
